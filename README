# -*- rd -*-

= README.en

== Author

  * Kouhei Sutou <kou@cozmixng.org>
  * Hiroyuki Ikezoe <poincare@ikezoe.net>

== License

LGPL

== What's this?

Cutter is an Unit Testing Framework for C.

The feature of Cutter is to making test as shared library.

== Dependency libraries

  * GLib

=== Suggested programs

  * run-test.el which is attached to
    ((<GaUnit|URL:http://www.cozmixng.org/~rwiki/?cmd=view;name=GaUnit>)).
    (If you want to run test with ease on the Emacs.)

== Get

((<URL:http://sourceforge.net/project/showfiles.php?group_id=208375>))

  % svn co https://cutter.svn.sourceforge.net/svnroot/cutter/trunk cutter

== Install

  % ./configure
  % make
  # make install

== Usage

  % cutter [Options] [Directory which has libtest_*.so]

=== Options

: -v LEVEL, --verbose=LEVEL

   It specifies verbose level. LEVEL is silent (s), normal (n),
   progress (p) or verbose (v). Output is more verbosely in
   the back.

: -s DIRECTORY, --source-directory=DIRECTORY

   Cutter adds DIRECTORY before file name when test fails. This
   is for tolls (like Emacs) which have function jumping to
   error line.

: -c[yes|true|no|false|auto], --color=[yes|true|no|false|auto]

   If 'yes' or 'true' is specified, Cutter uses colorized
   output by escape sequence. If 'no' or 'false' is
   specified, Cutter never use colorized output. If 'auto'
   or option is omitted, Cutter uses colorized output if
   available.

: -t TEST_CASE_NAME1,TEST_CASE_NAME2,..., --test-case=TEST_CASE_NAME1,TEST_CASE_NAME2,...

   Cutter runs test cases that is matched with
   TEST_CASE_NAME1, TEST_CASE_NAME2 or .... If
   TEST_CASE_NAME is surrounded by "/" (e.g. /test_/),
   TEST_CASE_NAME is handled as regular expression.

: -n TEST_NAME1,TEST_NAME2,..., --name=TEST_NAME1,TEST_NAME2,...

   Cutter runs tests that is matched with TEST_NAME1,
   TEST_NAME2 or .... If TEST_NAME is surrounded by "/"
   (e.g. /test_/), TEST_NAME is handled as regular
   expression.

: -m, --multi-thread

   Cutter runs a test case in a new thread.

== How to make test

Executing flow of test is the following.

  (1) Make test.
  (2) Compile it and make libtest_*.so.
  (3) Execute cutter. It loads libtest_*.so and tests.

See sample/calc/.

== References

=== Assertions

This is the list of assertion functions. (({message})) in the
arguments is displayed when assertion fails.

--- cut_error(message)

    It returns error status. It should be used in setup() or teardown().

--- cut_fail(message)

    It always fails.

--- cut_pending(message)

    It returns pending status.

--- cut_assert(expected, ...)

    It passes when (({expected})) is not 0.

--- cut_assert_null(expected, ...)

    It passes when (({expected})) is not NULL.

--- cut_assert_equal_int(expected, actual, ...)

    It passes when (({expected})) equals (({actual})). They
    must be int type or variant of int (like long).

--- cut_assert_equal_double(expected, actual, ...)

    It passes when (({expected})) equals (({actual})). They
    must be float type or variant of double.

--- cut_assert_equal_string(expected, actual, ...)

    It passes when (({expected})) and (({actual})) are same
    content string.

--- cut_notify(message)

    It just shows the message.

=== Template

The following is template of test.

  #include <cutter.h>
  
  #include "HEADER_FILE_OF_YOUR_PROGRAM"
  
  void test_function1(void);
  void test_function2(void);

  static int condition = 0;
  
  void
  setup (void)
  {
    condition = 1;
  }
  
  void
  teardown (void)
  {
    condition = 2;
  }

  void
  test_function1(void)
  {
    cut_assert_equal_int(1, condition,
                         "The condition value should set 1 in setup() but was: %d.",
			 condition);
    ...
  }
  
  void
  test_function1(void)
  {
    ...
  }
  
